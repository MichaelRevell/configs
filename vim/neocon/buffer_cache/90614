['ABSTRACT:', 'Crowdtilt', 'Billing', 'Logic', 'TODO:', 'relocate', 'this', 'class', 'somewhere', 'more', 'appropriate', 'needs', 'complete', 'documentation', 'package', 'Crowdtilt::Internal::API::Billing', 'Crowdtilt::Internal::API::Billing::VERSION', '0100', 'Dancer', ':syntax', 'template', 'config', 'debug', ':moose', 'Dancer::Plugin::DBIC', 'schema', 'Dancer::Plugin::Stomp', 'stomp_send', 'DateTime', 'Encode', 'encode_utf8', 'HTML::Entities', 'decode_entities', 'LWP::UserAgent', 'Math::Round', 'Moose', 'TryCatch', 'Crowdtilt::Internal::API::Common', 'get_admin_campaign_link', 'get_campaign_link', 'get_new_campaign_link', 'ORG_CROWDTILT', 'to_dollars', 'default', 'Dancer::config', 'lazy', 'Dancer::Plugin::DBIC::schema', 'Dancer::Plugin::Stomp::stomp_send', 'common', 'calculate_user_fee', 'self', 'campaign', 'contribution_data', 'return', 'unless', 'HASH', 'amount', 'brand_amount', 'user_fee', 'user_fee_amount', 'defined', 'ct_user_charge', 'Check', 'there', 'discount', 'used', 'apply', 'after', 'brand', 'would', 'promo', 'promotion_code', 'user_discount', 'calculate_admin_fee', 'admin_fee_amount', 'This', 'hard', 'coded', 'that', 'crowdtilt', 'api_user', 'does', 'will', 'logic', 'ct_admin_charge', 'branded', 'then', 'admin_fee', 'should', 'equal', 'brand_fee', 'reddit', 'hackish', 'accomplish', 'task', 'giving', 'example', 'right', 'using', 'new_balanced', 'APIs', 'brand_subdomain', 'campaign_brand_fields', 'find', 'name', 'fee_percent', 'value', 'admin_discount', 'calculate_brand_amount', 'contributions', 'status', 'postauth_approved', 'credit_released', 'deleted', 'get_column', 'checktilt', 'istilted', 'raised_amount', 'tiltamount', 'check_hit_target_amount', 'targetamount', 'has_hit_target_amount', 'check_first_contribution', 'user', 'campaign_id', 'preauth_accepted', 'count', 'current', 'contribution', 'scalar', 'send_admin_contribution_email', 'contribution_id', 'resultset', 'Contribution', 'admin', 'netamount', 'vars', 'ct_hostname', 'campaign_link', 'send_email', 'api_org', 'email', 'subject', 'Someone', 'joined', 'your', 'title', 'admin_contribution', 'template_vars', 'send_admin_receipt_email', 'Loves', 'firstname', 'contribution_admin_receipt', 'send_admin_hit_target_email', 'update_link', 'description', 'Amazing', 'Your', 'reached', 'target', 'admin_target_notification', 'send_receipt_email', 'allow_custom_msg', 'custom_msg', 'campaign_custom_emails', 'first_contribution_email_msg', 'single', 'fmt_amount', 'full_amount', 'contribution_date', 'new_campaign_link', 'admin_link', 'users', 'please', 'keep', 'receipt', 'contribution_receipt', 'send_refund_contribution_email', 'refunded_date', 'modification_date', 'last_four_digits', 'card', 'last_four', 'payment', 'been', 'refunded', 'refund_contribution', 'send_non_profit_receipt_email', 'Make', 'sure', 'valid', 'is_non_profit', 'tax_id', 'error', 'sending', 'profit', 'have', 'charge_date', 'creation_date', 'Thank', 'deductible', 'non_profit_contribution_receipt', 'send_first_contribution_confirmation_email', 'lastname', 'campaign_title', 'admin_email', 'admin_firstname', 'admin_lastname', 'deliver', 'to_id', 'first_contribution_confirmation', 'send_contribution_confirmation_email', 'Getting', 'making', 'same', 'every', 'time', 'send_tilted_admin_email', 'csv_link', 'contribution_details', 'bank_link', 'profile', 'edit', 'bank', 'Awesome', 'success', 'tilted_admin', 'send_expired_admin_only_campaign_email', 'Campaign:', 'tilted_admin_only_campaign', 'send_expired_tilted_admin_email', 'processor', 'expired_tilted_admin', 'send_expired_not_tilted_admin_email', 'stats', 'tilt_percent', 'expired_not_tilted_admin_less_than_40', 'else', 'expired_not_tilted_admin_40_or_more', 'original_expiration', 'expiration_original', 'send_failed_contribution_user_reminder', 'contribution_guid', 'guid', 'reply_to', 'reply', 'Action', 'Required:', 'could', 'processed', 'failed_contribution_user_reminder', 'send_failed_contribution_admin_reminder', 'Heads', 'some', 'contributors', 'couldn', 'charged', 'failed_contribution_admin_reminder', 'send_campaign_extension_email', 'sprintf', 'tilt_amount', 'Admin', 'Reopened', 'Campaign', 'campaign_extension', 'check_limits', 'user_id', 'contribution_amount', 'limit', 'ct_contribution_limit', 'Passed', 'first', 'check', 'monthly', 'month', 'format_datetime', 'time_zone', 'subtract', 'months', 'Find', 'created', 'within', 'last', 'active', 'search', 'naveed:', 'next', 'line', 'looks', 'backwards', 'ct_monthly_contribution_limit', 'second', 'allow', 'under', 'third', 'provided', 'metadatas', 'campaign_contribution_limit', 'fourth', 'send_receipt', 'trans_data', 'action', 'normal', 'authorization', 'post', 'here', 'custom', 'messages', 'since', 'wont', 'send', 'emails', 'from', 'raise', 'send_successful_bank_setup_email', 'doesn', 'verified', 'account', 'has_bank_account', 'direct', 'deposit', 'successful_bank_setup', 'send_draft_created_email', 'display_tiltamount', 'ct_team_email', 'Draft', 'Created:', 'draft_created', 'send_team_tilted_email', 'want', 'these', 'emailed', 'campaigns', 'INTTOOLS', 'admin_campaign_link', 'Tilted', 'team_tilted', 'send_team_reddit_notice_email', 'REDDIT', 'CAMPAIGN:', 'team_reddit_notice', 'send_tilted_expired_unverified_team_email', 'ACTION', 'REQUIRED:', 'Verify', 'tilted_expired_unverified', 'tilt_campaign', 'Double', 'tilted', 'given', 'when', 'tilting', 'passed', 'tilting_cont', 'find_tilting_contribution', 'undef', 'tilted_timestamp', 'update', 'tilt_timestamp', 'persistent', 'true', 'destination', 'queue', 'billing', 'body', 'to_json', 'Only', 'campaign_hit_target', 'target_contrib', 'find_hit_target_contribution', 'timestamp', 'hit_target_amount_timestamp', 'target_amount_hit', '__END__', 'head1', 'NAME', 'SYNOPSIS', 'my_config', 'my_schema', 'DESCRIPTION', 'module', 'contains', 'business', 'behind', 'system', 'intended', 'generic', 'regardless', 'being', 'also', 'provides', 'number', 'utility', 'methods', 'referenced', 'other', 'specific', 'modules', 'METHODS', 'head2', 'Checks', 'contributed', 'before', 'Returns', 'than', 'once', 'Calculates', 'much', 'charge', 'Historically', 'method', 'called', 'However', 'flexible', 'total', 'raised', 'opposed', 'each', 'individual', 'cents', 'contributor', 'receive', 'Throttles', 'down', 'checks', 'they', 'exceed', 'limitations', 'Currently', 'limitations:', 'which', 'file', 'limits', 'returns', 'failed', 'considered', 'tilt', 'calculations', 'following:', 'over', 'item', 'marked', 'case', 'happen', 'reasons', 'depending', 'ready', 'happens', 'only', 'back', 'sends']
